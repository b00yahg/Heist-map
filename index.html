<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xanathar Guild Hideout - Heist Planning Map</title>
    <style>
        body {
            font-family: 'Georgia', serif;
            background-color: #f0e6d2;
            margin: 0;
            padding: 20px;
            color: #5a3921;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: #f5e7d3;
            border: 2px solid #5a3921;
            border-radius: 8px;
            padding: 20px;
            position: relative;
        }
        
        .map-title {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .map-title h1 {
            margin: 0;
            color: #5a3921;
            font-size: 28px;
        }
        
        .map-title p {
            margin: 5px 0 0;
            font-style: italic;
            font-size: 16px;
        }
        
        .map-area {
            position: relative;
            height: 650px;
            border: 1px solid #5a3921;
            background-color: #f5e7d3;
            margin: 0 auto;
        }
        
        .room {
            position: absolute;
            border: 2px solid #5a3921;
            background-color: rgba(245, 231, 211, 0.9);
            text-align: center;
            padding: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .room:hover {
            background-color: rgba(245, 231, 211, 0.7);
            box-shadow: 0 0 8px rgba(90, 57, 33, 0.5);
            z-index: 100;
        }
        
        .room-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .room-detail {
            font-style: italic;
            font-size: 11px;
        }
        
        .tooltip {
            display: none;
            position: absolute;
            width: 180px;
            background-color: rgba(255, 250, 240, 0.95);
            border: 1px solid #5a3921;
            border-radius: 4px;
            padding: 10px;
            font-size: 12px;
            z-index: 1000;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            pointer-events: none;
        }
        
        .room:hover .tooltip {
            display: block;
        }
        
        .corridor {
            position: absolute;
            background-color: #5a3921;
            z-index: 1;
        }
        
        .corridor-h {
            height: 4px;
        }
        
        .corridor-v {
            width: 4px;
        }
        
        .alt-path {
            background-color: transparent;
            border: 2px dashed #5a3921;
        }
        
        .central-hub {
            border-radius: 50%;
        }
        
        .eye-symbol {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid #cc0000;
            z-index: 2;
        }
        
        .water-control {
            position: absolute;
            width: 12px;
            height: 12px;
            border: 2px solid #0066cc;
            z-index: 2;
        }
        
        .water-effect {
            position: absolute;
            border: none;
            background-color: rgba(0, 102, 0, 0.2);
            z-index: 0;
        }
        
        .guard-patrol {
            position: absolute;
            border: 2px dashed #cc6600;
            background-color: transparent;
            z-index: 0;
        }
        
        .legend {
            position: absolute;
            top: 20px;
            right: 40px;
            width: 170px;
            padding: 10px;
            border: 2px solid #5a3921;
            background-color: rgba(245, 231, 211, 0.9);
        }
        
        .legend-title {
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            margin-bottom: 10px;
            color: #5a3921;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 11px;
        }
        
        .legend-symbol {
            width: 16px;
            height: 16px;
            margin-right: 8px;
        }
        
        .notes {
            position: absolute;
            top: 20px;
            left: 40px;
            width: 190px;
            padding: 10px;
            border: 2px solid #5a3921;
            background-color: rgba(245, 231, 211, 0.9);
        }
        
        .notes-title {
            font-weight: bold;
            font-size: 14px;
            text-align: center;
            margin-bottom: 10px;
            color: #5a3921;
        }
        
        .note {
            font-size: 11px;
            margin-bottom: 6px;
            color: #5a3921;
        }
        
        .scale {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        
        .scale-bar {
            width: 100px;
            height: 2px;
            background-color: #5a3921;
            margin: 0 auto 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="map-title">
            <h1>XANATHAR GUILD HIDEOUT</h1>
            <p>Reconnaissance Blueprint</p>
        </div>
        
        <div class="map-area">
            <!-- Notes -->
            <div class="notes">
                <div class="notes-title">IMPORTANT NOTES</div>
                <div class="note">• Eyes = magical surveillance</div>
                <div class="note">• Water controls require TWO operators (Hub + Regulation)</div>
                <div class="note">• Goblins sleep 30min, patrol 15min</div>
                <div class="note">• Prisoner unattended 10min/hour</div>
                <div class="note">• Red control - affects flooded passage water level</div>
                <div class="note">• Blue control - affects corridor between Hub and Sleeping Area</div>
                <div class="note">• Yellow control - emergency flush, creates diversion</div>
                <div class="note">• Maintenance workers at dawn and dusk</div>
                <div class="note">• Guard changes every 4 hours</div>
            </div>
            
            <!-- Legend -->
            <div class="legend">
                <div class="legend-title">LEGEND</div>
                <div class="legend-item">
                    <div class="legend-symbol" style="border: 2px solid #cc0000; border-radius: 50%;"></div>
                    <span>Eye Surveillance</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol" style="border: 2px solid #0066cc;"></div>
                    <span>Water Controls</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol" style="border: 2px dashed #5a3921; height: 1px;"></div>
                    <span>Alternative Path</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol" style="background-color: rgba(0, 102, 0, 0.2);"></div>
                    <span>Water Level Affected</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol" style="border: 2px dashed #cc6600;"></div>
                    <span>Guard Patrol</span>
                </div>
            </div>

            <!-- Main Corridor Structure -->
            <!-- Center vertical line -->
            <div class="corridor corridor-v" style="left: 498px; top: 180px; height: 410px;"></div>
            
            <!-- Central horizontal line -->
            <div class="corridor corridor-h" style="left: 300px; top: 385px; width: 400px;"></div>
            
            <!-- Connect to Storage Room -->
            <div class="corridor corridor-h" style="left: 300px; top: 300px; width: 70px;"></div>
            <div class="corridor corridor-v" style="left: 300px; top: 300px; height: 85px;"></div>
            
            <!-- Connect to Intelligence Center -->
            <div class="corridor corridor-h" style="left: 420px; top: 180px; width: 78px;"></div>
            
            <!-- Connect to Sleeping Area -->
            <div class="corridor corridor-h" style="left: 498px; top: 300px; width: 70px;"></div>
            <div class="corridor corridor-v" style="left: 568px; top: 180px; height: 120px;"></div>
            
            <!-- Connect to Water Regulation -->
            <div class="corridor corridor-h" style="left: 568px; top: 180px; width: 170px;"></div>
            
            <!-- Connect to Watch Post A -->
            <div class="corridor corridor-v" style="left: 345px; top: 385px; height: 100px;"></div>
            
            <!-- Connect to Watch Post B -->
            <div class="corridor corridor-v" style="left: 655px; top: 385px; height: 80px;"></div>
            
            <!-- Connect to Armory -->
            <div class="corridor corridor-h" style="left: 568px; top: 465px; width: 42px;"></div>
            <div class="corridor corridor-v" style="left: 568px; top: 465px; height: 35px;"></div>
            
            <!-- Connect to Interrogation Chamber -->
            <div class="corridor corridor-h" style="left: 610px; top: 500px; width: 88px;"></div>
            <div class="corridor corridor-v" style="left: 698px; top: 385px; height: 115px;"></div>
            
            <!-- Connect to Flooded Passage -->
            <div class="corridor corridor-h" style="left: 698px; top: 500px; width: 72px;"></div>
            
            <!-- Connect to Portal Room -->
            <div class="corridor corridor-v" style="left: 498px; top: 590px; height: 60px;"></div>
            
            <!-- Connect to Hostel Cellar -->
            <div class="corridor corridor-h" style="left: 230px; top: 465px; width: 115px;"></div>
            <div class="corridor corridor-v" style="left: 230px; top: 465px; height: 135px;"></div>
            
            <!-- Alternative Paths -->
            <!-- Service Tunnel -->
            <div class="corridor corridor-v alt-path" style="left: 272px; top: 300px; height: 165px;"></div>
            
            <!-- Hidden Passage to Trash Compactor -->
            <div class="corridor corridor-v alt-path" style="left: 770px; top: 300px; height: 200px;"></div>
            
            <!-- Water Effects -->
            <!-- Red control - affects flooded passage -->
            <div class="water-effect" style="left: 770px; top: 495px; width: 70px; height: 10px;"></div>
            
            <!-- Blue control - affects corridor Hub to Sleeping Area -->
            <div class="water-effect" style="left: 498px; top: 295px; width: 70px; height: 10px;"></div>
            
            <!-- Yellow control - emergency flush -->
            <div class="water-effect" style="left: 693px; top: 385px; width: 10px; height: 115px;"></div>
            
            <!-- Guard Patrol area in Central Hub -->
            <div class="guard-patrol" style="left: 463px; top: 355px; width: 70px; height: 60px;"></div>
            
            <!-- Rooms -->
            <!-- Central Hub (Q1) -->
            <div class="room central-hub" style="width: 100px; height: 100px; left: 448px; top: 335px;">
                <div class="room-title">CENTRAL HUB</div>
                <div class="room-detail">Multi-level with walkways</div>
                <div class="water-control" style="top: 60px; left: 45px;"></div>
                <div class="tooltip" style="left: 100px; top: 20px;">
                    Contains pressure valve that requires coordination with Water Regulation room.
                </div>
            </div>
            
            <!-- Storage Room (Q3) -->
            <div class="room" style="width: 90px; height: 90px; left: 230px; top: 210px;">
                <div class="room-title">STORAGE ROOM</div>
                <div class="room-detail">Uniforms & Control Tables</div>
                <div class="tooltip" style="left: 90px; top: 20px;">
                    Various uniforms and Control Tables that can control different systems.
                </div>
            </div>
            
            <!-- Watch Post A (Q2a) -->
            <div class="room" style="width: 90px; height: 90px; left: 300px; top: 485px;">
                <div class="room-title">WATCH POST A</div>
                <div class="room-detail">Scrying Pool</div>
                <div class="eye-symbol" style="top: 60px; left: 15px;"></div>
                <div class="tooltip" style="left: 90px; top: -60px;">
                    Monitors northern passageways. Manned by two guards that switch every three hours. 
                    Note: Goblins are personally unionized and dedicated to clocking out even if there's 
                    no one to replace them.
                </div>
            </div>
            
            <!-- Intelligence Center (Q4) -->
            <div class="room" style="width: 90px; height: 90px; left: 330px; top: 90px;">
                <div class="room-title">INTELLIGENCE</div>
                <div class="room-title">CENTER</div>
                <div class="room-detail">Guild Records</div>
                <div class="eye-symbol" style="top: 25px; left: 15px;"></div>
                <div class="tooltip" style="left: 90px; top: 20px;">
                    Record room containing various records of the guild.
                </div>
            </div>
            
            <!-- Sleeping Area (Q5) -->
            <div class="room" style="width: 90px; height: 90px; left: 568px; top: 90px;">
                <div class="room-title">SLEEPING</div>
                <div class="room-title">AREA</div>
                <div class="room-detail">Guard Quarters</div>
                <div class="eye-symbol" style="top: 25px; left: 15px;"></div>
                <div class="tooltip" style="left: -90px; top: 20px;">
                    Contains sleeping quarters for guild members.
                </div>
            </div>
            
            <!-- Water Regulation (Q6) -->
            <div class="room" style="width: 90px; height: 90px; left: 738px; top: 90px;">
                <div class="room-title">WATER</div>
                <div class="room-title">REGULATION</div>
                <div class="room-detail">Main Controls</div>
                <div class="water-control" style="top: 60px; left: 15px;"></div>
                <div class="tooltip" style="left: -90px; top: 20px;">
                    Contains the main water control valves for the complex.
                </div>
            </div>
            
            <!-- Interrogation Chamber (Q7) -->
            <div class="room" style="width: 90px; height: 90px; left: 698px; top: 500px;">
                <div class="room-title">INTERROGATION</div>
                <div class="room-title">CHAMBER</div>
                <div class="room-detail">Likely where Floon is</div>
                <div class="eye-symbol" style="top: 25px; left: 15px;"></div>
                <div class="tooltip" style="left: -90px; top: 0px;">
                    Most likely where Floon is being held.
                </div>
            </div>
            
            <!-- Flooded Passage (Q8) -->
            <div class="room" style="width: 70px; height: 70px; left: 770px; top: 465px;">
                <div class="room-title">FLOODED</div>
                <div class="room-title">PASSAGE</div>
                <div class="room-detail">Water Level Varies</div>
                <div class="eye-symbol" style="top: 25px; left: 15px;"></div>
                <div class="tooltip" style="left: -70px; top: 0px;">
                    Water level controlled by red valve in Water Regulation room.
                </div>
            </div>
            
            <!-- Trash Compactor (former Halfling Cellar) (Q9) -->
            <div class="room" style="width: 70px; height: 70px; left: 770px; top: 230px;">
                <div class="room-title">TRASH</div>
                <div class="room-title">COMPACTOR</div>
                <div class="room-detail">Exit only</div>
                <div class="tooltip" style="left: -70px; top: 0px;">
                    Proper exit but unable to enter. Trash can exit, but no way to reverse the process.
                </div>
            </div>
            
            <!-- Armory (Q10) -->
            <div class="room" style="width: 70px; height: 70px; left: 498px; top: 465px;">
                <div class="room-title">ARMORY</div>
                <div class="eye-symbol" style="top: 40px; left: 15px;"></div>
                <div class="tooltip" style="left: 70px; top: 0px;">
                    Storage for weapons and armor.
                </div>
            </div>
            
            <!-- Portal Room (Q11) -->
            <div class="room" style="width: 70px; height: 70px; left: 463px; top: 590px;">
                <div class="room-title">PORTAL</div>
                <div class="room-title">ROOM</div>
                <div class="room-detail">Pressure Floor</div>
                <div class="tooltip" style="left: 70px; top: -20px;">
                    Contains a magical portal activated by a special stone eye.
                </div>
            </div>
            
            <!-- Hostel Cellar (Q12) -->
            <div class="room" style="width: 90px; height: 90px; left: 140px; top: 510px;">
                <div class="room-title">HOSTEL</div>
                <div class="room-title">CELLAR</div>
                <div class="room-detail">Wererat Deliveries</div>
                <div class="tooltip" style="left: 90px; top: -20px;">
                    Wererats conduct deliveries at dawn and dusk of large wine barrels.
                </div>
            </div>
            
            <!-- Watch Post B (Q2b) -->
            <div class="room" style="width: 90px; height: 90px; left: 610px; top: 385px;">
                <div class="room-title">WATCH POST B</div>
                <div class="room-detail">Scrying Pool</div>
                <div class="eye-symbol" style="top: 60px; left: 15px;"></div>
                <div class="tooltip" style="left: -90px; top: 20px;">
                    Contains a scrying pool that monitors eastern areas.
                </div>
            </div>
            
            <!-- Scale -->
            <div class="scale">
                <div class="scale-bar"></div>
                <div>1 square = 5 feet</div>
            </div>
        </div>
    </div>
    
    <script>
        // Make tooltips position themselves better based on window location
        document.querySelectorAll('.room').forEach(room => {
            room.addEventListener('mouseenter', function() {
                const tooltip = this.querySelector('.tooltip');
                const roomRect = this.getBoundingClientRect();
                const tooltipRect = tooltip.getBoundingClientRect();
                
                // Check if tooltip would go off the right edge of the screen
                if (roomRect.right + tooltipRect.width > window.innerWidth) {
                    tooltip.style.left = '-' + (tooltipRect.width + 10) + 'px';
                }
                
                // Check if tooltip would go off the top of the screen
                if (roomRect.top - tooltipRect.height < 0) {
                    tooltip.style.top = roomRect.height + 'px';
                }
            });
        });
    </script>
</body>
</html>
